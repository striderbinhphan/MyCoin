<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>BinhCoin</title>
		<!-- Description, Keywords and Author -->
		<meta name="description" content="Your description">
		<meta name="keywords" content="Your,Keywords">
		<meta name="author" content="HimanshuGupta">
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<!-- Styles -->
		<!-- Bootstrap CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">	
		<!-- Animate CSS -->
		<link href="css/animate.min.css" rel="stylesheet">
		<!-- Basic stylesheet -->
		<link rel="stylesheet" href="css/owl.carousel.css">
		<!-- Font awesome CSS -->
		<link href="css/font-awesome.min.css" rel="stylesheet">		
		<!-- Custom CSS -->
		<link href="css/style.css" rel="stylesheet">
		<link href="css/style-color.css" rel="stylesheet">
		<link href="css/hover.css" rel="stylesheet">
		<!-- Favicon -->
		<link rel="shortcut icon" href="img/logo/favicon.ico">
		<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css" />
	</head>
	
	<body>
		
		<!-- modal for booking ticket form -->
		<div class="modal fade" id="createwallet" tabindex="-1" role="dialog" aria-labelledby="createwallet">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Create wallet</h4>
					</div>
					<!-- form for events ticket booking -->
					<form>
						<div class="modal-body">
							<div class="form-group">
								<div class="button-options">
									<div class="item-select-custom">
										<div class="wallet-option-container">
											<div class="img-title-container">
												<div class="title-link-container">
													<span >Private Key</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							
							<button onclick="createWallet()" type="button" class="btn btn-success" data-dismiss="modal" data-target="#confirm-key">Generate KeyPair</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="modal fade" id="accesswallet" tabindex="-1" role="dialog" aria-labelledby="accesswallet" aria-hidden="true">
			<div class="modal-dialog" role="document">
			  <div class="modal-content">
				<div class="modal-header">
				  <h5 class="modal-title" id="exampleModalLabel">New message</h5>
				  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				  </button>
				</div>
				<div class="modal-body">
				  <form>
					<div class="form-group">
					  <label for="private-key" class="col-form-label">Private Key:</label>
					  <input type="password" class="form-control" id="private-key">
					</div>
				  </form>
				</div>
				<div class="modal-footer">
					<button onclick="accessWallet()" class="the-button-box no-min-width"> Access Wallet</button>
				</div>
			  </div>
			</div>
		  </div>
			
		<!-- wrapper -->
		<div class="wrapper" id="home">
		
			<!-- header area -->
			<header>
				<!-- secondary menu -->
				<nav class="secondary-menu">
					<div class="container">
						<!-- secondary menu left link area -->
						<div class="sm-left">
							<strong>Phone</strong>:&nbsp; <a href="#">+8432864xxxx</a>&nbsp;&nbsp;&nbsp;&nbsp;
							<strong>E-mail</strong>:&nbsp; <a href="#">pipporkk@gmail.com</a>
						</div>
						<!-- secondary menu right link area -->
						<div class="sm-right">
							<!-- social link -->
							<div class="sm-social-link">
								<a class="h-facebook" href="#"><i class="fa fa-facebook"></i></a>
								<a class="h-twitter" href="#"><i class="fa fa-twitter"></i></a>
								<a class="h-google" href="#"><i class="fa fa-google-plus"></i></a>
								<a class="h-linkedin" href="#"><i class="fa fa-linkedin"></i></a>
							</div>
						</div>
						<div class="clearfix"></div>
					</div>
				</nav>
				<!-- primary menu -->
				<nav class="navbar navbar-fixed-top navbar-default">
					<div class="container">
						<!-- Brand and toggle get grouped for better mobile display -->
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<!-- logo area -->
							<a class="navbar-brand" href="#home">
								<h4>Binh Coin</h4>
								<!-- logo image -->
								<img class="img-responsive"  alt="" />
							</a>
						</div>

						<!-- Collect the nav links, forms, and other content for toggling -->
						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<ul class="nav navbar-nav navbar-right">
								<li><a href="#blockchainexplorer">Block Chain Explorer</a></li>
								<li><a href="#createwallet" data-toggle="modal" data-target="#createwallet">Create Wallet</a></li>
								<li><a href="#accesswallet" data-toggle="modal" data-target="#accesswallet">Access Wallet</a></li>
							</ul>
						</div><!-- /.navbar-collapse -->
					</div><!-- /.container-fluid -->
				</nav>
			</header>
			<!--/ header end -->
			
			<!-- banner area -->
			<div class="banner">
				<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
					<!-- Wrapper for slides -->
					<div class="carousel-inner" role="listbox">
						<div class="item active">
							<img src="img/banner/blockchain3.jpg" alt="...">
							<div class="container">
								<!-- banner caption -->
								<div class="carousel-caption slide-one">
									<!-- heading -->
									<h2 class="animated fadeInLeftBig"><i class="fa fa-hand-o-right "></i> Cryptocurrency For You!</h2>
									<!-- paragraph -->
									<h3 class="animated fadeInRightBig">Sending &amp; Mining reward</h3>
									<!-- button -->
									<a  class="animated fadeIn btn btn-theme" data-toggle="modal" data-target="#createwallet">Create Wallet</a>
									<a  class="animated fadeIn btn btn-theme" data-toggle="modal" data-target="#accesswallet">Access Wallet</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ banner end -->
			
			<!-- block for animate navigation menu -->
			<div class="nav-animate"></div>
			
			<!-- Hero block area -->
			<div id="blockchainexplorer" class="hero pad">
				<div class="container">
					<!-- hero content -->
					<div class="hero-content ">
						<!-- heading -->
						<h2>Block Chain Explorer</h2>
					</div>
					<!-- hero play list -->
					<div class="hero-block">
						<div class="row">

							<div class="col-md-6 col-sm-6">
								<div class="card card-wrapper">
									<div class="card-header">
										<h4>Latest Block</h4>
										<hr>
									</div>
									<div class="card-body">
										<!-- play list -->
										<div class="block-content force-overflow scroll-custom">
											<ul id="blocks" class="list-unstyled">
												
											</ul>
										</div>
									</div>
									<div class="card-footer">
										<hr>
										<div class="">
											<a href="./blocks.html" class="hvr-back-pulse">View all blocks</a>
										</div>
									</div>
								</div>

							</div>
							<div class="col-md-6 col-sm-6">
								<div class="card card-wrapper">
									<div class="card-header">
										<h4>Latest transaction</h4>
										<hr>
									</div>
									<div class="card-body">
										<!-- play list -->
										<div class="block-content force-overflow scroll-custom block-scroll-action">
											<ul id="transactions" class="list-unstyled">
												
											</ul>
										</div>
									</div>
									<div class="card-footer">
										<hr>
										<div class="">
											<a href="#" class="hvr-back-pulse">View all transaction</a>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/ hero end -->
		
			
			<!-- meet -->
			<div class="meet parallax-four pad" id="meet">
				<div class="container">
					<!-- default heading -->
					<div class="default-heading-shadow">
						<h2>Upcoming Meets</h2>
					</div>
					<!-- meet location image -->
					<div class="meet-map">
						<img class="img-responsive img-map" src="img/flat/map.png" alt="" />
						<!-- map marker for India  -->
						<a href="#" class="map-marker india " data-toggle="tooltip" data-placement="top" title="India"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for United States  -->
						<a href="#" class="map-marker usa " data-toggle="tooltip" data-placement="top" title="United States"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for South Africa  -->
						<a href="#" class="map-marker sa " data-toggle="tooltip" data-placement="top" title="South Africa"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for Russia  -->
						<a href="#" class="map-marker russia " data-toggle="tooltip" data-placement="top" title="Russia"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
						<!-- map marker for Brazil  -->
						<a href="#" class="map-marker brazil " data-toggle="tooltip" data-placement="top" title="Brazil"><img class="img-responsive" src="img/flat/map-marker.png" alt="" /></a>
					</div>
				</div>
			</div>
			<!-- meet end -->
			

			<!-- footer -->
			<footer>
				<div class="container">
					<!-- social media links -->
					<div class="social">
						<a class="h-facebook" href="#"><i class="fa fa-facebook"></i></a>
						<a class="h-google" href="#"><i class="fa fa-google-plus"></i></a>
						<a class="h-linkedin" href="#"><i class="fa fa-linkedin"></i></a>
						<a class="h-twitter" href="#"><i class="fa fa-twitter"></i></a>
					</div>
					<!-- copy right -->
					<p class="copy-right">&copy; copyright 2018, All rights are reserved.</p>
				</div>
			</footer>
			<!-- footer end -->
			
			<!-- Scroll to top -->
			<span class="totop"><a href="#"><i class="fa fa-chevron-up"></i></a></span> 
		</div>
		
		<!-- Javascript files -->
		
		<!-- jQuery -->
		<script src="js/jquery.js"></script>
		<script src="js/jquery.mCustomScrollbar.js"></script>	
		<!-- Bootstrap JS -->
		<script src="js/bootstrap.min.js"></script>
		<!-- WayPoints JS -->
		<script src="js/waypoints.min.js"></script>
		<!-- Include js plugin -->
		<script src="js/owl.carousel.min.js"></script>
		<!-- One Page Nav -->
		<script src="js/jquery.nav.js"></script>
		<!-- Respond JS for IE8 -->
		<script src="js/respond.min.js"></script>
		<!-- HTML5 Support for IE -->
		<script src="js/html5shiv.js"></script>
		<!-- Custom JS -->
		<script src="js/custom.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
		<script id="transaction-template" type="text/x-handlebars-template">
			{{#each this}}
				<li class="block-item">
					<!-- song information -->
					<div class="block-info" >
						<!-- song title -->
						<h4>Transaction</h4>
						<div class="group-item-block">
							<div class="item-text-block">
								<span class="name-block-text">From Address :</span>
								<a href="{{fromAddress}}" class="value-block-text">{{fromAddress}}</a>
							</div>
							<div class="item-text-block">
								<span class="name-block-text">To Address :</span>
								<a href="{{toAddress}}" class="value-block-text">{{toAddress}}</a>
							</div>
							<div class="item-text-block">
								<span class="name-block-text">Amount :</span>
								<span class="value-block-text">{{amount}}</span>
							</div>
						</div>
					</div>
					<!-- music icon -->
					<!-- <div class="music-icon">
						<a href="#"><i class="fa fa-play"></i></a>
						<a href="#"><i class="fa fa-pause"></i></a>
					</div> -->
					<div class="clearfix"></div>
				</li>
			{{/each}}
		</script>
		<script id="block-template" type="text/x-handlebars-template">
			{{#each this}}
				<li class="block-item">
					<!-- song information -->
					<div class="block-info" >
						<!-- song title -->
						<h4>Block({{index}})</h4>
						<div class="group-item-block">
							<div class="item-text-block">
								<span class="name-block-text">Time :</span>
								<span class="value-block-text">{{timestamp}}</span>
							</div>
							<div class="item-text-block">
								<span class="name-block-text">Prev :</span>
								<a href="{{previousHash}}" class="value-block-text">{{previousHash}}</a>
							</div>
							<div class="item-text-block">
								<span class="name-block-text">Hash :</span>
								<a href="{{hash}}" class="value-block-text">{{hash}}</a>
							</div>
						</div>
					</div>
					<!-- music icon -->
					<!-- <div class="music-icon">
						<a href="#"><i class="fa fa-play"></i></a>
						<a href="#"><i class="fa fa-pause"></i></a>
					</div> -->
					<div class="clearfix"></div>
				</li>
			{{/each}}
		</script>
		<script>
			window.onload = loadBlocks;
			function loadBlocks() {
				const url = 'http://localhost:3001/blocks';
				axios.get(url).then(function (res) {
					console.log(res.data);
					console.log(res.data.map(x=>x.transactions).reduce((total,num)=>total.concat(num)));
					const blockSource = document.getElementById("block-template").innerHTML;
					const blockTemplate = Handlebars.compile(blockSource);
					const blockHtml = blockTemplate(res.data.map(x=>({
						index: x.index,
						timestamp: new Date(x.timestamp*1000).toISOString(),
						previousHash: x.previousHash,
						hash: x.hash
					})));
					document.getElementById('blocks').innerHTML += blockHtml;
					const transactionSource = document.getElementById("transaction-template").innerHTML;
					const transactionTemplate = Handlebars.compile(transactionSource);
					const transactionHtml = transactionTemplate(res.data.map(x=>x.transactions).reduce((total,num)=>total.concat(num)).map(x=>({
						fromAddress: x.fromAddress?x.fromAddress:"System",
						toAddress: x.toAddress,
						amount: x.amount
					})));
					document.getElementById('transactions').innerHTML += transactionHtml;
				})
			}
		</script>
		<script>
			function createWallet(){
				const createWalletUrl = 'http://localhost:3001/create-wallet';
				axios.post(createWalletUrl).then(function (res) { 
					console.log(res.data);
				})
			}
		</script>
	</body>	
</html>